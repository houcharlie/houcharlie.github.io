<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Charlie Hou</title>
  <meta name="description" content="Charlie Hou's research, papers, and talks" />
  <meta property="og:title" content="Charlie Hou" />
  <meta property="og:description" content="Charlie Hou's research, papers, and talks" />
  <meta property="og:type" content="website" />
  <meta name="color-scheme" content="light" />
  <style>
    :root {
      --bg: #ffffff;
      --fg: #111111;
      --muted: #555555;
      --link: #0a58ca;
      --border: #e5e5e5;
      --maxw: 760px;
    }
    body {
      margin: 0;
      font: 16px/1.65 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--fg);
      background: var(--bg);
    }
    .container { max-width: var(--maxw); margin: 0 auto; padding: 1.5rem 1rem; }
    header { position: sticky; top: 0; backdrop-filter: blur(6px); border-bottom: 1px solid var(--border); background: color-mix(in lab, var(--bg) 92%, transparent); }
    .nav-inner { display: flex; justify-content: space-between; align-items: center; }
    .brand { font-weight: 700; }
    nav a { margin-left: 1rem; color: inherit; text-decoration: none; }
    nav a:hover, nav a[aria-current="page"] { text-decoration: underline; }
    .intro { display: grid; grid-template-columns: 96px 1fr; gap: 1rem; align-items: start; margin: 1rem 0 1.75rem; }
    .intro img { width: 96px; height: 96px; border-radius: 999px; object-fit: cover; border: 1px solid var(--border); }
    h2 { font-size: 1.25rem; margin: 2rem 0 .5rem; border-bottom: 1px solid var(--border); padding-bottom: .25rem; }
    .list { list-style: none; padding: 0; margin: .5rem 0 0; }
    .list li { margin: .35rem 0; }
    .list time { color: var(--muted); margin-right: .4rem; white-space: nowrap; }
    .muted { color: var(--muted); }
    footer { margin: 3rem 0 1rem; color: var(--muted); font-size: .9rem; }
  </style>
</head>
<body>
  <header>
    <div class="container nav-inner">
      <div class="brand"><a href="#home">Charlie Hou</a></div>
      <nav>
        <a href="#home">Home</a>
        <a href="#papers">Papers</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section id="home" class="intro">
      <img src="me.jpg" alt="Portrait of Charlie Hou" />
      <div>
        <h1>Charlie Hou</h1>
        <p class="muted">AI researcher / engineer</p>
        <p>
          I am an AI research scientist at Meta. I work on synthetic data, privacy, and retrieval.
        </p>
        <p>
          <a href="cv.pdf">CV</a> / <a href="https://scholar.google.com/citations?user=92wmC6gAAAAJ&hl=en">Google Scholar</a> / <a href="https://x.com/hou_char">Twitter</a> / <a href="https://www.linkedin.com/in/charlie-hou-027a19113/">LinkedIn</a>
        </p>
      </div>
    </section>

    <section id="papers" aria-labelledby="papers-h">
      <h2 id="papers-h">Papers</h2>
      <div id="papers-loading" class="muted">Loading papers…</div>
      <ul id="papers-list" class="list" hidden></ul>
    </section>

    <footer>
      <p>© <span id="year"></span> Charlie Hou</p>
    </footer>
  </main>

  <script>
    // Update year
    document.getElementById('year').textContent = new Date().getFullYear();
  
    // Papers loader (supports both schemas):
    (async function loadPapers(){
      const listEl = document.getElementById('papers-list');
      const loadingEl = document.getElementById('papers-loading');
      try {
        const res = await fetch('papers.json', { cache: 'no-store' });
        if (!res.ok) throw new Error('Failed to fetch papers.json');
        const data = await res.json();
        if (!Array.isArray(data)) throw new Error('papers.json must be an array');
  
        // Sort descending by date (fallback to 1970)
        const items = data.slice().sort((a,b) =>
          Date.parse(b.date || '1970-01-01') - Date.parse(a.date || '1970-01-01')
        );
  
        const mon = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
        const esc = (s) => String(s).replace(/[&<>"]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[c]));
  
        const frag = document.createDocumentFragment();
        for (const p of items) {
          const li = document.createElement('li');
  
          // Date badge
          const d = new Date(p.date || '1970-01-01');
          const hasDate = !isNaN(d.getTime());
          const time = document.createElement('time');
          if (hasDate) {
            time.setAttribute('datetime', d.toISOString().slice(0,10));
            time.textContent = `${d.getUTCFullYear()} ${mon[d.getUTCMonth()]}`;
          } else {
            time.textContent = p.year || '';
          }
          li.appendChild(time);
  
          // Title + primary link (prefer links.paper, fall back to p.link)
          const primaryHref = (p.links && (p.links.paper || p.links.project || p.links.blog || p.links.code)) || p.link || '#';
          const titleA = document.createElement('a');
          titleA.href = primaryHref;
          titleA.rel = 'noreferrer';
          titleA.target = '_blank';
          titleA.innerHTML = ' ' + esc(p.title || 'Untitled');
          li.appendChild(titleA);
  
          // Venue/notes
          const metaBits = [];
          if (p.venue) metaBits.push(esc(p.venue));
          if (p.notes) metaBits.push(esc(p.notes));
          if (metaBits.length) {
            const span = document.createElement('span');
            span.className = 'muted';
            span.textContent = ` — ${metaBits.join(' · ')}`;
            li.appendChild(span);
          }
  
          // Inline small links (if using the rich schema)
          if (p.links) {
            const order = ['paper','project','blog','code'];
            const labels = {paper:'(paper)', project:'(project)', blog:'(blog)', code:'(code)'};
            for (const k of order) {
              if (p.links[k]) {
                const sep = document.createElement('span');
                sep.className = 'muted';
                sep.textContent = ' · ';
                const a = document.createElement('a');
                a.href = p.links[k]; a.rel = 'noreferrer'; a.target = '_blank'; a.textContent = labels[k];
                li.appendChild(sep); li.appendChild(a);
              }
            }
          }
  
          frag.appendChild(li);
        }
        listEl.innerHTML = '';
        listEl.appendChild(frag);
        listEl.hidden = false;
        if (loadingEl) loadingEl.remove();
      } catch (err) {
        if (loadingEl) loadingEl.textContent = 'Could not load papers.json';
        console.error(err);
      }
    })();
  </script>
  
</body>
</html>
